<!DOCTYPE html>

<html>
<head>
  <title>monotonic.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>

    <ul class="sections">

          <li id="title">
              <div class="annotation">
                  <h1>monotonic.js</h1>
              </div>
          </li>



        <li id="section-1">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> toWords = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">string</span>) </span>{
    <span class="hljs-keyword">var</span> padding = <span class="hljs-number">8</span> - (string.length &amp; <span class="hljs-number">0x7</span>)
    <span class="hljs-keyword">if</span> (padding != <span class="hljs-number">8</span>) {
        string = <span class="hljs-string">'00000000'</span>.substring(<span class="hljs-number">0</span>, padding) + string
    }
    <span class="hljs-keyword">return</span> string.match(<span class="hljs-regexp">/(.{1,8})/g</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">word</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(word, <span class="hljs-number">16</span>)
    })
}

<span class="hljs-keyword">var</span> toString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">words</span>) </span>{
    <span class="hljs-keyword">var</span> string = [ words[<span class="hljs-number">0</span>].toString(<span class="hljs-number">16</span>) ]
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>, I = words.length; i &lt; I; i++) {
        string.push((<span class="hljs-string">'00000000000'</span> + words[i].toString(<span class="hljs-number">16</span>)).substr(<span class="hljs-number">-8</span>))
    }
    <span class="hljs-keyword">var</span> string = string.join(<span class="hljs-string">''</span>)
    <span class="hljs-keyword">return</span> string
}

<span class="hljs-keyword">var</span> Part = {
    <span class="hljs-attr">toWords</span>: toWords,
    <span class="hljs-attr">toString</span>: toString,
    <span class="hljs-attr">compare</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">these, those</span>) </span>{
        <span class="hljs-keyword">var</span> compare = these.length - those.length
        <span class="hljs-keyword">if</span> (!compare) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, I = these.length; i &lt; I; i++) {
                compare = these[i] - those[i]
                <span class="hljs-keyword">if</span> (compare) {
                    <span class="hljs-keyword">return</span> compare
                }
            }
        }
        <span class="hljs-keyword">return</span> compare
    },
    <span class="hljs-attr">increment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">words</span>) </span>{
        words = words.slice()
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = words.length - <span class="hljs-number">1</span>; i != <span class="hljs-number">-1</span>; i--) {
            <span class="hljs-keyword">if</span> (words[i] == <span class="hljs-number">0xffffffff</span>) {
                words[i] = <span class="hljs-number">0</span>
            } <span class="hljs-keyword">else</span> {
                words[i]++
                <span class="hljs-keyword">break</span>
            }
        }
        <span class="hljs-keyword">if</span> (words[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span>) {
            words.unshift(<span class="hljs-number">0x1</span>)
        }
        <span class="hljs-keyword">return</span> words
    },
    <span class="hljs-attr">add</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">words, value</span>) </span>{
        words = words.slice()
        <span class="hljs-keyword">var</span> carry = value
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = words.length - <span class="hljs-number">1</span>; i != <span class="hljs-number">-1</span>; i--) {
            words[i] += carry
            <span class="hljs-keyword">if</span> (words[i] &gt; <span class="hljs-number">0xffffffff</span>) {
                carry = <span class="hljs-built_in">Math</span>.floor(words[i] / <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">32</span>))
                words[i] = words[i] &amp; <span class="hljs-number">0xffffffff</span>
            } <span class="hljs-keyword">else</span> {
                carry = <span class="hljs-number">0</span>
            }
        }
        <span class="hljs-keyword">if</span> (carry != <span class="hljs-number">0</span>) {
            words.unshift(carry)
        }
        <span class="hljs-keyword">return</span> words
    },
    <span class="hljs-attr">difference</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">these, those</span>) </span>{
        these = these.slice().reverse()
        those = those.slice().reverse()
        <span class="hljs-keyword">var</span> difference = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, I = <span class="hljs-built_in">Math</span>.max(these.length, those.length); i &lt; I; i++) {
            difference += ((these[i] || <span class="hljs-number">0</span>) - (those[i] || <span class="hljs-number">0</span>)) * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">32</span> * i)
        }
        <span class="hljs-keyword">return</span> difference
    },
    <span class="hljs-attr">asString</span>: {
        <span class="hljs-attr">toWords</span>: toWords,
        <span class="hljs-attr">toString</span>: toString,
        <span class="hljs-attr">compare</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
            <span class="hljs-keyword">return</span> Part.compare(Part.toWords(a), Part.toWords(b))
        },
        <span class="hljs-attr">increment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
            <span class="hljs-keyword">return</span> Part.toString(Part.increment(Part.toWords(number)))
        },
        <span class="hljs-attr">add</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, value</span>) </span>{
            <span class="hljs-keyword">return</span> Part.toString(Part.increment(Part.toWords(number)))
        },
        <span class="hljs-attr">difference</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
            <span class="hljs-keyword">return</span> Part.difference(Part.toWords(a), Part.toWords(b))
        }
    }
}

<span class="hljs-keyword">var</span> toWords = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
    <span class="hljs-keyword">return</span> number.split(<span class="hljs-string">'/'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">part</span>) </span>{ <span class="hljs-keyword">return</span> Part.toWords(part) })
}

<span class="hljs-keyword">var</span> toString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
    <span class="hljs-keyword">return</span> number.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">part</span>) </span>{ <span class="hljs-keyword">return</span> Part.toString(part) }).join(<span class="hljs-string">'/'</span>)
}

<span class="hljs-keyword">var</span> Path = {
    <span class="hljs-attr">toWords</span>: toWords,
    <span class="hljs-attr">toString</span>: toString,
    <span class="hljs-attr">compare</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, I = <span class="hljs-built_in">Math</span>.min(a.length, b.length); i &lt; I; i++) {
            <span class="hljs-keyword">var</span> compare = Part.compare(a[i], b[i])
            <span class="hljs-keyword">if</span> (compare) {
                <span class="hljs-keyword">return</span> compare
            }
        }
        <span class="hljs-keyword">return</span> a.length - b.length
    },
    <span class="hljs-attr">compareIndex</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, index</span>) </span>{
        <span class="hljs-keyword">return</span> Part.compare(a[index], b[index])
    },
    <span class="hljs-attr">increment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, index</span>) </span>{
        number = Path.toWords(Path.toString(number))
        number[index] = Part.increment(number[index])
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = index + <span class="hljs-number">1</span>, I = number.length; i &lt; I; i++) {
            number[i] = [ <span class="hljs-number">0</span> ]
        }
        <span class="hljs-keyword">return</span> number
    },
    <span class="hljs-attr">add</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, value</span>) </span>{
        number = Path.toWords(Path.toString(number))
        number[number.length - <span class="hljs-number">1</span>] = Part.add(number[number.length - <span class="hljs-number">1</span>], value)
        <span class="hljs-keyword">return</span> number
    },
    <span class="hljs-attr">difference</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, index</span>) </span>{
        <span class="hljs-keyword">return</span> Part.difference(a[index], b[index])
    },
    <span class="hljs-attr">isBoundary</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, index</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = index + <span class="hljs-number">1</span>, I = number.length; i &lt; I; i++) {
            <span class="hljs-keyword">if</span> (!(number[i].length == <span class="hljs-number">1</span> &amp;&amp; number[i][<span class="hljs-number">0</span>] == <span class="hljs-number">0</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">Part</span>: Part,
    <span class="hljs-attr">asString</span>: {
        <span class="hljs-attr">toWords</span>: toWords,
        <span class="hljs-attr">toString</span>: toString,
        <span class="hljs-attr">compare</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
            <span class="hljs-keyword">return</span> Path.compare(Path.toWords(a), Path.toWords(b))
        },
        <span class="hljs-attr">compareIndex</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, index</span>) </span>{
            <span class="hljs-keyword">return</span> Path.compareIndex(Path.toWords(a), Path.toWords(b), index)
        },
        <span class="hljs-attr">increment</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, index</span>) </span>{
            <span class="hljs-keyword">return</span> Path.toString(Path.increment(Path.toWords(number), index))
        },
        <span class="hljs-attr">add</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, value</span>) </span>{
            <span class="hljs-keyword">return</span> Path.toString(Path.add(Path.toWords(number), value))
        },
        <span class="hljs-attr">isBoundary</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, index</span>) </span>{
            <span class="hljs-keyword">return</span> Path.isBoundary(Path.toWords(number), index)
        },
        <span class="hljs-attr">difference</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, index</span>) </span>{
            <span class="hljs-keyword">return</span> Path.difference(Path.toWords(a), Path.toWords(b), index)
        }
    }
}

<span class="hljs-built_in">module</span>.exports = Path

</pre></div></div>

        </li>

    </ul>
  </div>
</body>
</html>
